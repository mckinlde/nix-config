sudo nixos-rebuild switch -I nixos-config=./configuration.nix
git add .
# ToDo: use an LLM to read git diff, check success/err after rebuild, and generate a better commit msg
git commit -m "run ./nrs.sh"
git push

#!/usr/bin/env bash

set -e  # exit on any failure

echo "Running nixos-rebuild..."
sudo nixos-rebuild switch -I nixos-config=./configuration.nix

echo "Build succeeded. Committing changes..."
git add .
git commit -m "run ./nrs.sh"
git push
